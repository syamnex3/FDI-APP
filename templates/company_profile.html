<!DOCTYPE html>
<html lang="en">
<head>
     {% load static %}
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Profile - Exact Match</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* --- HEADER STYLES (from setting options) --- */
        /* Universal box-sizing for consistent layout */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Base body styles with smaller font and Inter font family */
        body {
            font-family: 'Roboto', sans-serif; /* Kept Roboto for main content as per original company_profile */
            background-color: #F0F2F5; /* Lighter grey background */
            font-size: 14px; /* Reduced base font size for the entire body */
            padding-top: 85px; /* Added padding to prevent content from being hidden by fixed header */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top */
            min-height: 100vh;
        }

        /* Fixed top header for consistent placement */
        .top-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 10;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Brand title section - dark blue bar at the very top */
        .brand-title {
            background-color: #1d2686;
            color: #fff;
            font-size: 20px; /* Reduced font size */
            padding: 10px 12px; /* Reduced padding */
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Text within the brand title */
        .brand-title-text {
            color: #fff;
            font-size: 20px; /* This is the size from Setting options.html */
            font-weight: bold;
        }

        /* Main header below the brand title, containing breadcrumbs and status */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px; /* Reduced padding */
            border-bottom: 1px solid #eee;
        }

        /* Breadcrumb navigation */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0;
            font-size: 12px; /* Reduced font size */
            color: #999;
        }

        /* Profile Menu Container (S, dropdown arrow) */
        .profile-menu-container {
            position: relative;
            display: flex;
            align-items: center;
            gap: 6px; /* Reduced gap */
            cursor: pointer;
            color: #fff;
            font-weight: bold;
        }

        /* Profile avatar (the 'S' circle) */
        .profile-avatar {
            width: 28px; /* Reduced size */
            height: 28px; /* Reduced size */
            border-radius: 50%;
            background-color: #e0e0e0;
            color: #1d2686;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px; /* Reduced font size */
            text-transform: uppercase;
        }

        /* Styles for the new question mark icon next to 'S' */
        .profile-help-icon {
            color: #fff; /* White color for the question mark icon */
            font-size: 20px; /* Increased font size for visual weight to match 'S' visually */
            width: 28px; /* Matched width with .profile-avatar */
            height: 28px; /* Matched height with .profile-avatar */
            border-radius: 6px; /* Slightly rounded corners for the square */
            display: flex; /* Use flex to center the icon */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            margin-left: 10px; /* Space it out from the profile avatar/dropdown */
            cursor: pointer; /* Indicate it's clickable */
        }

        /* Profile dropdown menu */
        .profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            overflow: hidden;
            min-width: 200px; /* Slightly reduced width */
            display: none;
            z-index: 100;
            margin-top: 8px; /* Reduced gap */
            font-family: 'Inter', sans-serif;
        }

        .profile-dropdown.show {
            display: block;
        }

        /* Header within the dropdown (Sri, email, company) */
        .profile-dropdown-header {
            padding: 8px 12px; /* Reduced padding */
            background-color: #f0f2f5;
            border-bottom: 1px solid #eee;
            font-weight: 600;
            color: #333;
        }

        .profile-dropdown-header span {
            font-size: 14px; /* Reduced font size */
        }

        .profile-dropdown-header small {
            color: #666;
            font-weight: 400;
            font-size: 11px; /* Reduced font size */
        }

        /* Individual items in the dropdown menu */
        .profile-dropdown-item {
            padding: 8px 12px; /* Reduced padding */
            display: flex;
            align-items: center;
            gap: 8px; /* Reduced gap */
            text-decoration: none;
            color: #333;
            font-weight: 500;
            font-size: 12px; /* Reduced font size */
            transition: background-color 0.2s;
        }

        .profile-dropdown-item:hover {
            background-color: #f5f5f5;
        }

        .profile-dropdown-item i {
            color: #1d2686;
        }

        /* --- ORIGINAL COMPANY PROFILE STYLES --- */
        /* Main Container - Adjusted margin-top to account for the fixed header bar */
        .container {
            display: flex;
            width: 100%;
            max-width: 1100px;
            margin-top: 20px; /* Adjusted to fit below the new header */
            margin-bottom: 30px;
            background-color: #FFFFFF;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: #FFFFFF;
            padding: 20px 0;
            border-right: 1px solid #E6E6E6;
        }

        .sidebar h2 {
            font-size: 19px;
            font-weight: 500;
            color: #333333;
            padding: 0 25px 20px;
            margin: 0;
            border-bottom: 1px solid #EBEBEB;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin-top: 5px;
        }

        .sidebar ul li {
            margin: 0;
        }

        .sidebar ul li a {
            display: flex;
            align-items: center;
            padding: 12px 25px;
            text-decoration: none;
            color: #4C4C4C;
            font-size: 15px;
            font-weight: 500;
            transition: background-color 0.2s, color 0.2s;
        }

        .sidebar ul li a.active {
            background-color: #E6F0FF;
            color: #007bff;
            border-left: 3px solid #007bff;
            padding-left: 22px;
        }

        .sidebar ul li a:not(.active):hover {
            background-color: #F9F9F9;
            color: #333333;
        }

        .sidebar ul li a svg {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            fill: currentColor;
            flex-shrink: 0;
        }

        /* Main Content Area */
        .main-content {
            flex-grow: 1;
            padding: 25px 30px;
            background-color: #F9F9F9;
        }

        /* Card Styling (Forms) */
        .card {
            background-color: #FFFFFF;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            border: 1px solid #E0E0E0;
        }

        .card:last-child {
            margin-bottom: 0;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 25px;
            border-bottom: 1px solid #EEEEEE;
        }

        .card-header h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 500;
            color: #333333;
            display: flex;
            align-items: center;
        }

        .card-header h3 svg {
            margin-right: 8px;
            width: 18px;
            height: 18px;
            fill: #666666;
        }

        .card-header .toggle-icon {
            cursor: pointer;
            font-size: 1.2em;
            color: #666666;
            transition: transform 0.2s;
        }

        .card-header .toggle-icon.collapsed {
            transform: rotate(-90deg);
        }

        .card-body {
            padding: 20px 25px;
        }

        /* Form Layout */
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
        }

        .form-row:last-of-type {
            margin-bottom: 0;
        }

        .form-group {
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555555;
            font-size: 13px;
            font-weight: 500;
        }

        .required-asterisk {
            color: #DC3545;
            margin-left: 2px;
        }

        /* Input, Textarea, Select Styling */
        input[type="text"],
        input[type="url"],
        input[type="tel"],
        input[type="date"],
        textarea,
        select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #CCCCCC;
            border-radius: 4px;
            font-size: 14px;
            color: #333333;
            box-sizing: border-box;
            transition: border-color 0.2s, box-shadow 0.2s;
            background-color: #FFFFFF;
        }

        input::placeholder,
        textarea::placeholder {
            color: #999999;
        }

        input:focus,
        textarea:focus,
        select:focus {
            border-color: #007BFF;
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.2);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* Specific Input Styles */
        .phone-input-group {
            display: flex;
        }

        .phone-input-group select {
            flex-shrink: 0;
            width: auto;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: none;
            padding-right: 8px;
        }

        .phone-input-group input[type="tel"] {
            flex-grow: 1;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        .input-with-icon {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-with-icon input {
            padding-right: 35px;
        }

        .input-with-icon svg {
            position: absolute;
            right: 10px;
            color: #666666;
            width: 16px;
            height: 16px;
            fill: currentColor;
            pointer-events: none;
        }

        .character-count {
            text-align: right;
            font-size: 11px;
            color: #777777;
            margin-top: 5px;
        }

        /* Radio Group for Logo Display */
        .radio-group {
            display: flex;
            gap: 25px;
            margin-top: 5px;
            margin-bottom: 15px;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: normal;
            font-size: 14px;
            color: #333333;
            margin-bottom: 0;
        }

        .radio-group input[type="radio"] {
            margin-right: 8px;
            width: 16px;
            height: 16px;
            accent-color: #007BFF;
        }

        /* Logo Upload Section */
        .logo-upload-section {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo-placeholder {
            width: 90px;
            height: 90px;
            background-color: #E0E0E0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            border: 1px solid #D0D0D0;
        }

        .logo-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .logo-placeholder .change-image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.65);
            color: #FFFFFF;
            padding: 5px 0;
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .logo-placeholder:hover .change-image-overlay {
            opacity: 1;
        }

        .logo-upload-section input[type="file"] {
            display: none;
        }

        /* Positioning for pitch input relative to logo */
        .logo-pitch-container {
            margin-left: 30px;
            flex-grow: 1;
            min-width: 200px;
        }
        .logo-pitch-container .form-group {
            margin-bottom: 0;
        }

        /* Button Group */
        .button-group {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #EEEEEE;
        }

        .button-group button {
            padding: 10px 25px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.2s, color 0.2s, box-shadow 0.2s;
        }

        .button-group .cancel-btn {
            background-color: #F0F0F0;
            color: #555555;
            border: 1px solid #CCCCCC;
        }

        .button-group .cancel-btn:hover {
            background-color: #E0E0E0;
        }

        .button-group .save-btn {
            background-color: #007BFF;
            color: #FFFFFF;
        }

        .button-group .save-btn:hover {
            background-color: #0069D9;
            box-shadow: 0 2px 5px rgba(0, 123, 255, 0.25);
        }

        /* Multimedia Specific Styles */
        .multimedia-section {
            display: none; /* Hidden by default, shown when Multimedia is active */
            padding: 25px 30px; /* Match main-content padding */
            background-color: #F9F9F9; /* Match main-content background */
        }

        .multimedia-section h2 {
            margin-top: 0;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            color: #333;
        }

        .upload-box {
            border: 2px dashed #ccc;
            padding: 2rem;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 1rem;
            background-color: #fafafa;
        }

        .preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            min-height: 100px;
            padding: 1rem;
            border: 1px dashed #ccc;
            border-radius: 8px;
            background-color: #fff;
        }

        .media-item {
            width: 150px;
            position: relative;
            border: 1px solid #ccc;
            padding: 5px;
            border-radius: 8px;
            cursor: move;
        }

        .media-item input[type="checkbox"] {
            position: absolute;
            top: 5px;
            left: 5px;
            z-index: 10;
        }

        .media-item video,
        .media-item img {
            width: 100%;
            height: auto;
            border-radius: 6px;
        }

        .actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1rem 0;
        }

        .actions button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .delete-btn { background-color: #e74c3c; color: white; }
        .default-btn { background-color: #3498db; color: white; }
        .footer-buttons {
            text-align: right;
            margin-top: 2rem;
        }

        .footer-buttons button {
            margin-left: 1rem;
        }

        .note {
            background-color: #eef2fb;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        .section-title-multimedia { /* Renamed to avoid conflict */
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 1rem 0 0.5rem;
            font-size: 1.1rem;
            font-weight: 500;
            color: #333;
        }
        
        .default-selected {
            border: 2px solid green !important;
        }

        /* Custom Alert/Confirm Modals */
        .custom-modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(99, 102, 102, 0.5); /* gray-600 with 50% opacity */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }

        .custom-modal-content {
            background-color: #ffffff;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
            max-width: 24rem; /* max-w-sm */
            width: 100%;
            margin-left: 1rem; /* mx-4 */
            margin-right: 1rem; /* mx-4 */
        }

        .custom-modal-title {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            color: #1a202c; /* gray-900 */
            margin-bottom: 1rem; /* mb-4 */
        }

        .custom-modal-message {
            color: #374151; /* gray-700 */
            margin-bottom: 1.5rem; /* mb-6 */
        }

        .custom-modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem; /* gap-3 */
        }

        .custom-modal-button {
            padding: 0.5rem 1rem; /* px-4 py-2 */
            border-radius: 0.375rem; /* rounded-md */
            cursor: pointer;
            transition: background-color 0.15s ease-in-out;
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* font-medium */
        }

        .custom-modal-button.ok {
            background-color: #2563eb; /* bg-blue-600 */
            color: #ffffff; /* text-white */
        }

        .custom-modal-button.ok:hover {
            background-color: #1d4ed8; /* hover:bg-blue-700 */
        }

        .custom-modal-button.cancel {
            background-color: #e5e7eb; /* bg-gray-200 */
            color: #1f2937; /* text-gray-800 */
        }

        .custom-modal-button.cancel:hover {
            background-color: #d1d5db; /* hover:bg-gray-300 */
        }

        .custom-modal-button.confirm {
            background-color: #dc2626; /* bg-red-600 */
            color: #ffffff; /* text-white */
        }

        .custom-modal-button.confirm:hover {
            background-color: #b91c1c; /* hover:bg-red-700 */
        }


        /* Responsive Adjustments */
        @media (max-width: 900px) {
            .container {
                margin: 20px;
                margin-top: 80px; /* Adjust for smaller header on mobile */
            }
            .sidebar {
                width: 200px;
            }
            .sidebar h2, .sidebar ul li a {
                padding-left: 15px;
                padding-right: 15px;
            }
            .sidebar ul li a.active {
                padding-left: 12px;
            }
            .main-content {
                padding: 20px;
            }
            .card-header {
                padding: 12px 20px;
            }
            .card-body {
                padding: 15px 20px;
            }
            .top-header {
                height: auto; /* Allow height to adjust */
            }
            .brand-title {
                font-size: 18px;
                padding: 8px 10px;
            }
            .brand-title-text {
                font-size: 18px;
            }
            .header {
                padding: 3px;
            }
            .breadcrumb {
                font-size: 11px;
            }
            .profile-avatar {
                width: 24px;
                height: 24px;
                font-size: 10px;
            }
            .profile-help-icon {
                font-size: 18px;
                width: 24px;
                height: 24px;
            }
            .profile-dropdown-header span {
                font-size: 12px;
            }
            .profile-dropdown-header small {
                font-size: 10px;
            }
            .profile-dropdown-item {
                font-size: 11px;
                padding: 6px 10px;
            }
            .multimedia-section {
                padding: 20px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding-top: 70px; /* Adjust for mobile header */
            }
            .container {
                flex-direction: column;
                margin: 0;
                border-radius: 0;
                box-shadow: none;
                margin-top: 0; /* No top margin on mobile, header takes care of spacing */
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #EBEBEB;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);
            }

            .sidebar h2 {
                text-align: center;
                padding-left: 0;
                padding-right: 0;
                border-bottom: none;
                padding-bottom: 10px;
            }

            .sidebar ul {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                margin-top: 0;
                padding: 0 10px;
            }

            .sidebar ul li a {
                padding: 8px 12px;
                font-size: 13px;
                margin: 3px;
                border-radius: 4px;
                border-left: none !important;
            }

            .sidebar ul li a.active {
                background-color: #007BFF;
                color: #FFFFFF;
            }

            .sidebar ul li a:not(.active):hover {
                background-color: #F0F0F0;
            }

            .main-content, .multimedia-section {
                padding: 15px;
            }

            .form-row {
                flex-direction: column;
                gap: 15px;
            }

            .form-group {
                min-width: unset;
                width: 100%;
            }

            .logo-upload-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .logo-pitch-container {
                margin-left: 0;
                margin-top: 15px;
                width: 100%;
            }

            .button-group {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }

            .button-group button {
                width: 100%;
            }
            .top-header {
                height: auto;
            }
            .brand-title {
                font-size: 16px;
                padding: 6px 8px;
            }
            .brand-title-text {
                font-size: 16px;
            }
            .header {
                padding: 2px;
            }
            .breadcrumb {
                font-size: 10px;
            }
            .profile-avatar {
                width: 20px;
                height: 20px;
                font-size: 9px;
            }
            .profile-help-icon {
                font-size: 16px;
                width: 20px;
                height: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Integrated Header -->
    <div class="top-header">
        <!-- Top bar with FDI and Profile -->
        <div class="brand-title">
            <span class="brand-title-text">FDI</span>
            <!-- Profile Menu Section -->
            <div class="profile-menu-container" id="profileMenuContainer">
                <div class="profile-avatar">S</div> <!-- Initial for 'Sri' -->
                <i class="fas fa-question-circle profile-help-icon" id="helpIcon"></i>
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="profile-dropdown-header">
                        <span>Sri</span><br>
                        <small>srharshak@nexnoratech.onmicros....</small><br>
                        <small>Nexnoratech</small>
                    </div>
                    <a href="/company-profile/" class="profile-dropdown-item">
                        <i class="fas fa-building"></i> Company Profile
                    </a>
                    <a href="/team-members/" class="profile-dropdown-item">
                        <i class="fas fa-users"></i> Team Members
                    </a>
                    <a href="#" class="profile-dropdown-item">
                        <i class="fas fa-envelope"></i> Email Templates
                    </a>
                    <a href="/question-library/" class="profile-dropdown-item">
                        <i class="fas fa-question-circle"></i> Connect Question Library
                    </a>
                    <a href="#" class="profile-dropdown-item">
                        <i class="fas fa-chart-bar"></i> Plan Usage
                    </a>
                    <a href="/setting/" class="profile-dropdown-item">
                        <i class="fas fa-cog"></i> Setting Options
                    </a>
                    <a href="#" class="profile-dropdown-item">
                        <i class="fas fa-user-circle"></i> My Account 
                    </a>
                    <a href="/logout/" class="profile-dropdown-item">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </div>

        <!-- Modified Navigation Bar -->
        <div class="header">
          <div class="breadcrumb">
            <span style="font-weight: bold; color: #1d2686; font-size: 14px; padding: 5px 8px;">Company Profile</span> <!-- Adjusted padding-left here -->
          </div>
        </div>
    </div>

    <div class="container">
        <aside class="sidebar">
            <ul>
                <li>
                    <a href="#" class="active" id="companyConfigLink">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" style="margin-right:10px;" viewBox="0 0 24 24" fill="none">
                            <path d="M4 21V19H5V10H2V8L12 3L22 8V10H19V19H20V21H13V17H11V21H4ZM7 19H9V15H15V19H17V8.85L12 6.15L7 8.85V19ZM11 19H13V15H11V19Z" fill="#4267B2"/>
                        </svg>
                        Company configuration
                    </a>
                </li>
                <li>
                    <a href="#" id="multimediaLink">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" style="margin-right:10px;" viewBox="0 0 24 24" fill="none">
                            <path d="M18 4L20 8H22V20H2V8H4L6 4H18ZM6.85 8L5.62 6H4.38L3.15 8H6.85ZM17.15 8H20.85L19.62 6H18.38L17.15 8ZM20 10H4V18H20V10ZM8 8H16L14.77 6H9.23L8 8Z" fill="#4267B2"/>
                        </svg>
                        Multimedia
                    </a>
                </li>
            </ul>
        </aside>

        <main class="main-content" id="mainContent">
            <div id="companyConfigurationContent">
                <div class="card" id="companyBrandingCard">
                    <div class="card-header">
                        <h3>
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" style="margin-right:8px;" viewBox="0 0 24 24" fill="none">
                                <path d="M4 21V19H5V10H2V8L12 3L22 8V10H19V19H20V21H13V17H11V21H4ZM7 19H9V15H15V19H17V8.85L12 6.15L7 8.85V19ZM11 19H13V15H11V19Z" fill="#4267B2"/>
                            </svg>
                            Company Branding
                        </h3>
                        <span class="toggle-icon">&#9650;</span>
                    </div>
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Select a way to show company logo</label>
                                <div class="radio-group">
                                    <label>
                                        <input type="radio" name="logoDisplay" value="logoCompany" checked>
                                        Logo + Company name
                                    </label>
                                    <label>
                                        <input type="radio" name="logoDisplay" value="logoOnly">
                                        Logo
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row logo-upload-section">
                            <div>
                                <div class="logo-placeholder" onclick="document.getElementById('logoUpload').click()">
                                    <img id="uploadedLogo" src="" alt="Company Logo">
                                    <div class="change-image-overlay">Change image</div>
                                    <input type="file" id="logoUpload" accept="image/*">
                                </div>
                                <div class="form-group" id="additionalTextBoxContainer" style="display:none; margin-top:12px;">
                                    <label for="CompanyName">CompanyName</label>
                                    <input type="text" id="additionalTextBox" placeholder="CompanyName" maxlength="100">
                                </div>
                            </div>
                            <div class="logo-pitch-container">
                                <div class="form-group">
                                    <label for="oneLinePitch">One line pitch</label>
                                    <input type="text" id="oneLinePitch" placeholder="e.g. Accelerating the advent of sustainable transportation" maxlength="500">
                                    <div class="character-count">Maximum 500 Characters</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" id="companyInformationCard">
                    <div class="card-header">
                        <h3>
                            <svg fill="#666666" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"/><path d="M11 11h2v6h-2zm0-4h2v2h-2z"/></svg>
                            Company Information
                        </h3>
                        <span class="toggle-icon">&#9650;</span>
                    </div>
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="companyName">Company name<span class="required-asterisk">*</span></label>
                                <input type="text" id="companyName" placeholder="Enter company name" required>
                            </div>
                            <div class="form-group">
                                <label for="phoneNumber">Phone<span class="required-asterisk">*</span></label>
                                <div class="phone-input-group">
                                    <select>
                                        <option value="+1">+1 (USA/Canada)</option>
                                        <option value="+91">+91 (India)</option>
                                        <option value="+44">+44 (United Kingdom)</option>
                                        <option value="+61">+61 (Australia)</option>
                                        <option value="+81">+81 (Japan)</option>
                                        <option value="+49">+49 (Germany)</option>
                                        <option value="+33">+33 (France)</option>
                                        <option value="+39">+39 (Italy)</option>
                                        <option value="+34">+34 (Spain)</option>
                                        <option value="+86">+86 (China)</option>
                                        <option value="+7">+7 (Russia)</option>
                                        <option value="+55">+55 (Brazil)</option>
                                        <option value="+27">+27 (South Africa)</option>
                                        <option value="+64">+64 (New Zealand)</option>
                                        <option value="+351">Portugal</option>
                                        <option value="+30">Greece</option>
                                        <option value="+82">South Korea</option>
                                        <option value="+66">Thailand</option>
                                        <option value="+63">Philippines</option>
                                        <option value="+20">Egypt</option>
                                    </select>
                                    <input type="tel" id="phoneNumber" placeholder="Enter PhoneNumber" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="location">Location<span class="required-asterisk">*</span></label>
                                <input type="text" id="location" placeholder="Enter company location" required>
                            </div>
                            <div class="form-group">
                                <label for="website">Website</label>
                                <input type="url" id="website" placeholder="Enter company website URL">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="businessCategories">Business Categories<span class="required-asterisk">*</span></label>
                                <textarea id="businessCategories" placeholder="Enter business categories" required></textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="investments">Investments</label>
                                <div class="input-with-icon">
                                    <input type="text" id="investments" placeholder="Enter investment details">
                                    <svg fill="#666666" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm0 14H4V6h16v12z"/><path d="M14 9h2c1.103 0 2 .897 2 2v2c0 1.103-.897 2-2 2h-2c-1.103 0-2-.897 2-2V9h2zM9 9H7v2h2v2H7v2h2c1.103 0 2-.897 2-2V9c0-1.103-.897-2-2-2H7zm0-4H7v2h2V5z"/></svg>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="establishedDate">Established date</label>
                                <div class="input-with-icon">
                                    <input type="text" id="establishedDate" placeholder="Select date" onfocus="(this.type='date')" onblur="(this.type='text')">
                                    <svg fill="#666666" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 4h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-1 16H6c-.551 0-1-.449-1-1V8h14l.002 11c0 .551-.449 1-1.002 1z"/><path d="M12 10H7v5h5zm6 0h-5v5h5z"/></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" id="companyAddressCard">
                    <div class="card-header">
                        <h3>
                            <svg fill="#666666" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5S13.38 11.5 12 11.5z"/></svg>
                            Company Address
                        </h3>
                        <span class="toggle-icon">&#9650;</span>
                    </div>
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="streetAddress">Street Address<span class="required-asterisk">*</span></label>
                                <input type="text" id="streetAddress" placeholder="Enter street address" required>
                            </div>
                            <div class="form-group">
                                <label for="suiteBuilding">Suite/Unit/Building<span class="required-asterisk">*</span></label>
                                <input type="text" id="suiteBuilding" placeholder="Enter Suite/Unit/Building" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="city">City<span class="required-asterisk">*</span></label>
                                <input type="text" id="city" placeholder="Enter city" required>
                            </div>
                            <div class="form-group">
                                <label for="country">Country<span class="required-asterisk">*</span></label>
                                <select id="country" required>
                                    <option value="">Select country</option>
                                    <option value="USA">United States</option>
                                    <option value="India">India</option>
                                    <option value="Canada">Canada</option>
                                    <option value="Australia">Australia</option>
                                    <option value="United Kingdom">United Kingdom</option>
                                    <option value="Germany">Germany</option>
                                    <option value="France">France</option>
                                    <option value="Italy">Italy</option>
                                    <option value="Spain">Spain</option>
                                    <option value="Japan">Japan</option>
                                    <option value="China">China</option>
                                    <option value="Russia">Russia</option>
                                    <option value="+55">Brazil</option>
                                    <option value="+27">South Africa</option>
                                    <option value="+64">New Zealand</option>
                                    <option value="+351">Portugal</option>
                                    <option value="+30">Greece</option>
                                    <option value="+82">South Korea</option>
                                    <option value="+66">Thailand</option>
                                    <option value="+63">Philippines</option>
                                    <option value="+20">Egypt</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="state">State<span class="required-asterisk">*</span></label>
                                <select id="state" required>
                                    <option value="">Select state</option>
                                    </select>
                            </div>
                            <div class="form-group">
                                <label for="pincode">Pincode<span class="required-asterisk">*</span></label>
                                <input type="text" id="pincode" placeholder="Enter pincode" required>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="button-group">
                    <button type="button" class="cancel-btn" onclick="showCustomConfirm('Are you sure you want to cancel? All changes will be lost.', resetCompanyConfigurationForm)">Cancel</button>
                    <button type="button" class="save-btn">Save</button>
                </div>
            </div>

            <div id="multimediaContent" class="multimedia-section">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2>Upload Media</h2>
                    <button class="default-btn" onclick="candidatePreview()">👁️ Candidate Preview</button>
                </div>

                <div class="upload-box" id="uploadBox">
                    <p>Drag and drop/click to upload (png/jpg/mp4)</p>
                    <small>Max upload size for image (2MB) & video (100MB)</small>
                    <input type="file" id="fileInput" multiple accept="image/*,video/mp4" hidden />
                </div>

                <div class="actions">
                    <div>
                        <input type="checkbox" id="selectAll" />
                        <label for="selectAll">Select all</label>
                    </div>
                    <div>
                        <button class="delete-btn" onclick="deleteSelected()">🗑 Delete Selected</button>
                        <button class="default-btn" onclick="setDefault()">⭐ Set as default</button>
                    </div>
                </div>

                <div class="note"><strong>Note:</strong> Multimedia will be displayed in the order of arrangement. Please drag for rearranging the images or videos.</div>

                <div class="section-title-multimedia"><span>🖼</span> <strong>Images</strong></div>
                <div id="imagePreview" class="preview-container">Please upload some media.</div>

                <div class="section-title-multimedia"><span>🎞</span> <strong>Videos</strong></div>
                <div id="videoPreview" class="preview-container">Please upload some media.</div>

                <div class="footer-buttons">
                    <button onclick="showCustomConfirm('Are you sure you want to cancel? All uploaded media will be cleared.', resetMultimediaForm)">Cancel</button>
                    <button class="default-btn" onclick="saveMedia()">Save</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        let defaultMedia = null;

        document.addEventListener('DOMContentLoaded', function() {
            const companyConfigLink = document.getElementById('companyConfigLink');
            const multimediaLink = document.getElementById('multimediaLink');
            const companyConfigurationContent = document.getElementById('companyConfigurationContent');
            const multimediaContent = document.getElementById('multimediaContent');

            // Initial load
            loadSection('company');

            companyConfigLink.addEventListener('click', function(e) {
                e.preventDefault();
                loadSection('company');
            });

            multimediaLink.addEventListener('click', function(e) {
                e.preventDefault();
                loadSection('multimedia');
            });

            function loadSection(section) {
                document.querySelectorAll(".sidebar li a").forEach(link => link.classList.remove("active"));

                if (section === 'company') {
                    companyConfigLink.classList.add("active");
                    companyConfigurationContent.style.display = 'block';
                    multimediaContent.style.display = 'none';
                    // Rebind toggle card body visibility for company config
                    document.querySelectorAll('.card-header .toggle-icon').forEach(icon => {
                        icon.addEventListener('click', toggleCardBody);
                    });
                } else if (section === 'multimedia') {
                    multimediaLink.classList.add("active");
                    companyConfigurationContent.style.display = 'none';
                    multimediaContent.style.display = 'block';
                    bindUploadEvents(); // Bind multimedia events when this section is loaded
                }
            }

            // Toggle card body visibility for Company Configuration
            function toggleCardBody() {
                const cardBody = this.closest('.card').querySelector('.card-body');
                if (cardBody) {
                    const isVisible = cardBody.style.display !== 'none';
                    cardBody.style.display = isVisible ? 'none' : 'block';
                    this.classList.toggle('collapsed', isVisible);
                    this.innerHTML = isVisible ? '&#9660;' : '&#9650;';
                }
            }
            // Initial binding for Company Configuration cards
            document.querySelectorAll('#companyConfigurationContent .card-header .toggle-icon').forEach(icon => {
                icon.addEventListener('click', toggleCardBody);
            });


            // Handle logo upload
            const logoUploadInput = document.getElementById('logoUpload');
            const uploadedLogo = document.getElementById('uploadedLogo');

            if (logoUploadInput) { // Check if element exists before adding listener
                logoUploadInput.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            uploadedLogo.src = e.target.result;
                            uploadedLogo.style.display = 'block';
                            uploadedLogo.closest('.logo-placeholder').style.backgroundColor = 'transparent';
                        };
                        reader.readAsDataURL(file);
                    } else {
                        uploadedLogo.src = '';
                        uploadedLogo.style.display = 'none';
                        uploadedLogo.closest('.logo-placeholder').style.backgroundColor = '#E0E0E0';
                    }
                });
            }

            // Country and State dropdown logic
            const countryStateData = {
                "USA": ["California", "Texas", "New York", "Florida", "Illinois", "Pennsylvania", "Ohio", "Georgia", "North Carolina", "Michigan", "New Jersey", "Virginia", "Washington", "Arizona", "Massachusetts", "Tennessee", "Indiana", "Missouri", "Maryland", "Wisconsin", "Colorado", "Minnesota", "South Carolina", "Alabama", "Kentucky"],
                "India": ["Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh", "Goa", "Gujarat", "Haryana", "Himachal Pradesh", "Jharkhand", "Karnataka", "Kerala", "Madhya Pradesh", "Maharashtra", "Manipur", "Meghalaya", "Mizoram", "Nagaland", "Odisha", "Punjab", "Rajasthan", "Sikkim", "Tamil Nadu", "Telangana", "Tripura", "Uttar Pradesh", "Uttarakhand", "West Bengal"],
                "Canada": ["Ontario", "Quebec", "British Columbia", "Alberta", "Manitoba", "Saskatchewan", "Nova Scotia", "New Brunswick", "Prince Edward Island", "Newfoundland and Labrador", "Yukon", "Northwest Territories", "Nunavut"],
                "Australia": ["New South Wales", "Victoria", "Queensland", "Western Australia", "South Australia", "Tasmania", "Australian Capital Territory", "Northern Territory"],
                "United Kingdom": ["England", "Scotland", "Wales", "Northern Ireland", "Greater London", "West Midlands", "Greater Manchester", "West Yorkshire", "Merseyside", "South Yorkshire", "Tyne and Wear", "Lancashire", "Kent", "Essex", "Surrey"],
                "Germany": ["Bavaria", "Berlin", "North Rhine-Westphalia", "Hesse", "Saxony", "Baden-Württemberg", "Lower Saxony", "Rhineland-Palatinate", "Hamburg", "Brandenburg", "Thuringia", "Saxony-Anhalt", "Schleswig-Holstein", "Mecklenburg-Vorpommern", "Bremen"],
                "France": ["Île-de-France", "Provence-Alpes-Côte d'Azur", "Auvergne-Rhône-Alpes", "Nouvelle-Aquitaine", "Occitanie", "Hauts-de-France", "Grand Est", "Pays de la Loire", "Bretagne", "Normandie", "Centre-Val de Loire", "Bourgogne-Franche-Comté", "Corse"],
                "Italy": ["Lazio", "Lombardy", "Campania", "Sicily", "Emilia-Romagna", "Piedmont", "Veneto", "Tuscany", "Apulia", "Calabria", "Sardinia", "Liguria", "Abruzzo", "Friuli Venezia Giulia", "Umbria", "Basilicata", "Molise"],
                "Spain": ["Andalusia", "Catalonia", "Madrid", "Valencian Community", "Galicia", "Basque Country", "Castile and León", "Canary Islands", "Aragon", "Castile-La Mancha", "Asturias", "Extremadura", "Murcia", "Balearic Islands", "La Rioja", "Navarre", "Cantabria"],
                "Japan": ["Tokyo", "Osaka", "Hokkaido", "Kyoto", "Fukuoka", "Aichi", "Kanagawa", "Hyogo", "Okinawa", "Chiba", "Saitama", "Hiroshima", "Shizuoka", "Miyagi", "Ibaraki", "Gifu", "Tochigi"],
                "China": ["Beijing", "Shanghai", "Guangdong", "Zhejiang", "Sichuan", "Jiangsu", "Shandong", "Henan", "Hunan", "Hebei", "Anhui", "Fujian", "Hubei", "Liaoning", "Chongqing", "Shaanxi", "Yunnan"],
                "Russia": ["Moscow", "Saint Petersburg", "Novosibirsk", "Yekaterinburg", "Nizhny Novgorod", "Kazan", "Chelyabinsk", "Omsk", "Rostov-on-Don", "Ufa", "Samara", "Volgograd", "Krasnoyarsk", "Voronezh", "Saratov", "Tolyatti"],
                "Brazil": ["São Paulo", "Rio de Janeiro", "Minas Gerais", "Bahia", "Parana", "Rio Grande do Sul", "Pernambuco", "Ceará", "Pará", "Santa Catarina", "Goiás", "Maranhão", "Espírito Santo", "Paraíba", "Rio Grande do Norte", "Alagoas"],
                "South Africa": ["Gauteng", "Western Cape", "KwaZulu-Natal", "Eastern Cape", "Mpumalanga", "Limpopo", "Free State", "North West", "Northern Cape"],
                "New Zealand": ["Auckland", "Wellington", "Canterbury", "Otago", "Waikato", "Bay of Plenty", "Hawke's Bay", "Taranaki", "Manawatu-Wanganui", "Nelson", "Tasman", "Marlborough", "Gisborne", "Southland"],
                "Portugal": ["Lisbon", "Porto", "Braga", "Coimbra", "Aveiro", "Setúbal", "Évora", "Faro", "Viseu", "Leiria", "Castelo Branco", "Guarda", "Santarém", "Beja"],
                "Greece": ["Attica", "Central Macedonia", "Crete", "Thessaly", "Epirus", "Western Greece", "Peloponnese", "Eastern Macedonia and Thrace", "North Aegean", "South Aegean", "Ionian Islands", "Western Macedonia", "Central Greece"],
                "South Korea": ["Seoul", "Busan", "Incheon", "Daegu", "Gwangju", "Daejeon", "Ulsan", "Sejong", "Gyeonggi Province", "Gangwon Province", "Chungcheongbuk Province", "Chungcheongnam Province", "Jeollabuk Province", "Jeollanam Province", "Gyeongsangbuk Province", "Gyeongsangnam Province"],
                "Thailand": ["Bangkok", "Chiang Mai", "Phuket", "Khon Kaen", "Nakhon Ratchasima", "Chonburi", "Songkhla", "Udon Thani", "Surat Thani", "Nakhon Si Thammarat", "Rayong", "Pattaya", "Samut Prakan", "Nonthaburi", "Pathum Thani"],
                "Philippines": ["Metro Manila", "Cebu", "Davao", "Zamboanga", "Baguio", "Iloilo", "Cagayan de Oro", "General Santos", "Bacolod", "Legazpi", "San Fernando", "Tacloban", "Butuan", "Puerto Princesa", "Laoag"],
                "Egypt": ["Cairo", "Alexandria", "Giza", "Shubra El Kheima", "Port Said", "Suez", "Luxor", "Aswan", "Mansoura", "Tanta", "Faiyum", "Ismailia", "Zagazig", "Asyut", "Damanhur"]
            };

            const countrySelect = document.getElementById('country');
            const stateSelect = document.getElementById('state');

            if (countrySelect) { // Check if element exists before adding listener
                countrySelect.addEventListener('change', function() {
                    const states = countryStateData[this.value] || [];
                    stateSelect.innerHTML = '<option value="">Select state</option>';
                    states.forEach(state => {
                        const option = document.createElement('option');
                        option.value = state;
                        option.textContent = state;
                        stateSelect.appendChild(option);
                    });
                });
            }

            // Unified Save/Cancel logic for the company configuration form
            const saveBtn = document.querySelector('.button-group .save-btn');
            const cancelBtn = document.querySelector('.button-group .cancel-btn');

            // Collect all required fields from both cards
            const requiredFields = [
                // Company Information
                document.getElementById('companyName'),
                document.getElementById('phoneNumber'),
                document.getElementById('location'),
                document.getElementById('businessCategories'),
                // Company Address
                document.getElementById('streetAddress'),
                document.getElementById('suiteBuilding'),
                document.getElementById('city'),
                document.getElementById('country'),
                document.getElementById('state'),
                document.getElementById('pincode')
            ].filter(field => field !== null); // Filter out nulls in case elements aren't present

            // Country code to phone number length mapping (add more as needed)
            const phoneLengthByCountry = {
                "+1": [10],           // USA/Canada
                "+91": [10],          // India
                "+44": [10, 11],      // UK (mobiles: 10 or 11 digits)
                "+61": [9],           // Australia
                "+81": [9, 10, 11],   // Japan (varies)
                "+49": [10, 11],      // Germany (varies)
                "+33": [9],           // France
                "+39": [9, 10],       // Italy
                "+34": [9],           // Spain
                "+86": [11],          // China
                "+7": [10],           // Russia
                "+55": [10, 11],      // Brazil
                "+27": [9],           // South Africa
                "+64": [8, 9],        // New Zealand
                "+351": [9],          // Portugal
                "+30": [10],          // Greece
                "+82": [9, 10],       // South Korea
                "+66": [9],           // Thailand
                "+63": [10],          // Philippines
                "+20": [10, 11]       // Egypt (varies)
                // Add more as needed
            };

            if (saveBtn) { // Check if element exists before adding listener
                saveBtn.addEventListener('click', function() {
                    let valid = true;
                    let missingFields = [];
                    const fieldLabels = {
                        companyName: "Company Name",
                        phoneNumber: "Phone",
                        location: "Location",
                        businessCategories: "Business Categories",
                        streetAddress: "Street Address",
                        suiteBuilding: "Suite/Unit/Building",
                        city: "City",
                        country: "Country",
                        state: "State",
                        pincode: "Pincode"
                    };

                    requiredFields.forEach(field => {
                        if (field && field.hasAttribute('required') && !field.value) {
                            valid = false;
                            field.style.borderColor = '#DC3545';
                            missingFields.push(fieldLabels[field.id]);
                        } else if (field) {
                            field.style.borderColor = '';
                        }
                    });

                    // Phone number length validation
                    const phoneInput = document.getElementById('phoneNumber');
                    if (phoneInput) {
                        const countryCodeSelect = phoneInput.parentElement.querySelector('select');
                        if (countryCodeSelect) {
                            const countryCode = countryCodeSelect.value;
                            const digits = phoneInput.value.replace(/\D/g, '');
                            const allowedLengths = phoneLengthByCountry[countryCode] || [10];
                            if (phoneInput.hasAttribute('required') && (!digits || !allowedLengths.includes(digits.length))) {
                                valid = false;
                                phoneInput.style.borderColor = '#DC3545';
                                if (!missingFields.includes("Phone")) {
                                    missingFields.push(
                                        `Phone (must be ${allowedLengths.join(" or ")} digits for ${countryCode})`
                                    );
                                }
                            } else if (phoneInput.value) { // If there's input, but not required, still validate format if not empty
                                if (!allowedLengths.includes(digits.length)) {
                                    valid = false;
                                    phoneInput.style.borderColor = '#DC3545';
                                    if (!missingFields.includes("Phone")) { // Prevent double adding if already missing
                                        missingFields.push(
                                            `Phone (must be ${allowedLengths.join(" or ")} digits for ${countryCode})`
                                        );
                                    }
                                } else {
                                    phoneInput.style.borderColor = '';
                                }
                            } else {
                                phoneInput.style.borderColor = '';
                            }
                        }
                    }

                    if (valid) {
                        showCustomAlert('All data saved successfully!');
                        // Add your form submission logic here
                    } else {
                        showCustomAlert('Please fill the following required fields:\n- ' + missingFields.join('\n- '));
                    }
                });
            }

            // Function to reset company configuration form
            window.resetCompanyConfigurationForm = function() {
                document.querySelectorAll('#companyConfigurationContent input, #companyConfigurationContent textarea, #companyConfigurationContent select').forEach(field => {
                    if (field.type === 'select-one') {
                        field.selectedIndex = 0;
                    } else {
                        field.value = '';
                    }
                    field.style.borderColor = '';
                });
                // Reset state dropdown
                const stateSelect = document.getElementById('state');
                if (stateSelect) {
                    stateSelect.innerHTML = '<option value="">Select state</option>';
                }
                // Reset logo display
                const defaultLogoRadio = document.querySelector('input[name="logoDisplay"][value="logoCompany"]');
                if (defaultLogoRadio) {
                    defaultLogoRadio.checked = true;
                    updateAdditionalTextBoxVisibility();
                }
                if (uploadedLogo) {
                    uploadedLogo.src = '';
                    uploadedLogo.style.display = 'none';
                    const logoPlaceholder = uploadedLogo.closest('.logo-placeholder');
                    if (logoPlaceholder) {
                        logoPlaceholder.style.backgroundColor = '#E0E0E0';
                    }
                }
            };

            // Show/hide additional textbox based on radio selection
            const logoRadios = document.querySelectorAll('input[name="logoDisplay"]');
            const additionalTextBoxContainer = document.getElementById('additionalTextBoxContainer');

            function updateAdditionalTextBoxVisibility() {
                const selected = document.querySelector('input[name="logoDisplay"]:checked');
                if (selected && selected.value === 'logoCompany') {
                    additionalTextBoxContainer.style.display = '';
                } else {
                    additionalTextBoxContainer.style.display = 'none';
                }
            }

            logoRadios.forEach(radio => {
                radio.addEventListener('change', updateAdditionalTextBoxVisibility);
            });

            // Initialize on page load for company branding
            updateAdditionalTextBoxVisibility();


            // Multimedia JavaScript
            function bindUploadEvents() {
                const uploadBox = document.getElementById('uploadBox');
                const fileInput = document.getElementById('fileInput');
                const imagePreview = document.getElementById('imagePreview');
                const videoPreview = document.getElementById('videoPreview');
                const selectAll = document.getElementById('selectAll');
                const deleteSelectedBtn = document.querySelector('.actions .delete-btn');
                const setDefaultBtn = document.querySelector('.actions .default-btn');
                const multimediaCancelBtn = document.querySelector('.footer-buttons button[onclick*="resetMultimediaForm"]');
                const multimediaSaveBtn = document.querySelector('.footer-buttons button[onclick*="saveMedia"]');


                // Remove existing listeners to prevent duplicates
                if (uploadBox) uploadBox.removeEventListener('click', handleUploadBoxClick);
                if (uploadBox) uploadBox.removeEventListener('dragover', handleDragOver);
                if (uploadBox) uploadBox.removeEventListener('dragleave', handleDragLeave);
                if (uploadBox) uploadBox.removeEventListener('drop', handleDrop);
                if (fileInput) fileInput.removeEventListener('change', handleFileInputChange);
                if (selectAll) selectAll.removeEventListener('change', handleSelectAllChange);
                if (deleteSelectedBtn) deleteSelectedBtn.removeEventListener('click', deleteSelected);
                if (setDefaultBtn) setDefaultBtn.removeEventListener('click', setDefault);
                if (multimediaCancelBtn) multimediaCancelBtn.removeEventListener('click', () => showCustomConfirm('Are you sure you want to cancel? All uploaded media will be cleared.', resetMultimediaForm));
                if (multimediaSaveBtn) multimediaSaveBtn.removeEventListener('click', saveMedia);

                // Add new listeners
                if (uploadBox) uploadBox.addEventListener('click', handleUploadBoxClick);
                if (uploadBox) uploadBox.addEventListener('dragover', handleDragOver);
                if (uploadBox) uploadBox.addEventListener('dragleave', handleDragLeave);
                if (uploadBox) uploadBox.addEventListener('drop', handleDrop);
                if (fileInput) fileInput.addEventListener('change', handleFileInputChange);
                if (selectAll) selectAll.addEventListener('change', handleSelectAllChange);
                if (deleteSelectedBtn) deleteSelectedBtn.addEventListener('click', deleteSelected);
                if (setDefaultBtn) setDefaultBtn.addEventListener('click', setDefault);
                if (multimediaCancelBtn) multimediaCancelBtn.addEventListener('click', () => showCustomConfirm('Are you sure you want to cancel? All uploaded media will be cleared.', resetMultimediaForm));
                if (multimediaSaveBtn) multimediaSaveBtn.addEventListener('click', saveMedia);
            }

            function handleUploadBoxClick() {
                document.getElementById('fileInput').click();
            }

            function handleDragOver(e) {
                e.preventDefault();
                document.getElementById('uploadBox').style.borderColor = '#3498db';
            }

            function handleDragLeave() {
                document.getElementById('uploadBox').style.borderColor = '#ccc';
            }

            function handleDrop(e) {
                e.preventDefault();
                const fileInput = document.getElementById('fileInput');
                fileInput.files = e.dataTransfer.files;
                handleFiles(e.dataTransfer.files, document.getElementById('imagePreview'), document.getElementById('videoPreview'));
                document.getElementById('uploadBox').style.borderColor = '#ccc';
            }

            function handleFileInputChange() {
                handleFiles(this.files, document.getElementById('imagePreview'), document.getElementById('videoPreview'));
            }

            function handleSelectAllChange() {
                const mediaItems = document.querySelectorAll('.media-item input[type="checkbox"]');
                if (mediaItems.length === 0) {
                    showCustomAlert("Add images/videos first");
                    this.checked = false;
                    return;
                }
                mediaItems.forEach(cb => cb.checked = this.checked);
            }

            window.deleteSelected = function () {
                const itemsToDelete = document.querySelectorAll('.media-item input[type="checkbox"]:checked');
                if (itemsToDelete.length === 0) {
                    showCustomAlert("No media selected to delete.");
                    return;
                }

                showCustomConfirm("Are you sure you want to delete the selected media?", () => {
                    let canDeleteAll = true;
                    itemsToDelete.forEach(cb => {
                        const item = cb.closest('.media-item');
                        if (item === defaultMedia) {
                            showCustomAlert("Cannot delete the default media. Please set another media as default first if you wish to delete this one.");
                            canDeleteAll = false;
                            return; // Skip deletion for this item
                        }
                    });

                    if (canDeleteAll) {
                        itemsToDelete.forEach(cb => {
                            const item = cb.closest('.media-item');
                            item.remove();
                        });

                        const imagePreview = document.getElementById('imagePreview');
                        const videoPreview = document.getElementById('videoPreview');
                        if (!imagePreview.querySelector('.media-item')) imagePreview.innerHTML = 'Please upload some media.';
                        if (!videoPreview.querySelector('.media-item')) videoPreview.innerHTML = 'Please upload some media.';

                        // Deselect "Select all" if no items are left or all are deleted
                        const selectAllCheckbox = document.getElementById('selectAll');
                        if (selectAllCheckbox) selectAllCheckbox.checked = false;

                        showCustomAlert("Selected media deleted.");
                    }
                });
            };

            window.setDefault = function () {
                const checkedItems = document.querySelectorAll(".media-item input[type='checkbox']:checked");
                if (checkedItems.length !== 1) {
                    showCustomAlert("Please select exactly one media to set as default.");
                    return;
                }

                if (defaultMedia) {
                    defaultMedia.classList.remove("default-selected");
                }

                defaultMedia = checkedItems[0].closest(".media-item");
                defaultMedia.classList.add("default-selected");
                showCustomAlert("Default media set!");
            };

            function handleFiles(files, imagePreview, videoPreview) {
                [...files].forEach(file => {
                    const url = URL.createObjectURL(file);
                    const item = document.createElement('div');
                    item.className = 'media-item';
                    item.draggable = true;
                    item.innerHTML = `<input type="checkbox" /><br/>`;

                    if (file.type.startsWith('image')) {
                        item.innerHTML += `<img src="${url}" alt="img" />`;
                        if (imagePreview.textContent.includes('Please upload')) imagePreview.innerHTML = '';
                        imagePreview.appendChild(item);
                    } else if (file.type === 'video/mp4') {
                        item.innerHTML += `<video src="${url}" controls></video>`;
                        if (videoPreview.textContent.includes('Please upload')) videoPreview.innerHTML = '';
                        videoPreview.appendChild(item);
                    }

                    addDragAndDrop(item);
                });
            }

            function addDragAndDrop(item) {
                let dragged;
                item.addEventListener('dragstart', (e) => {
                    dragged = item;
                    e.dataTransfer.effectAllowed = 'move';
                });
                item.addEventListener('dragover', e => e.preventDefault());
                item.addEventListener('drop', function(e) {
                    e.preventDefault();
                    if (dragged !== this && dragged.parentNode === this.parentNode) {
                        const parent = this.parentNode;
                        const children = Array.from(parent.children);
                        const draggedIndex = children.indexOf(dragged);
                        const targetIndex = children.indexOf(this);

                        if (draggedIndex < targetIndex) {
                            parent.insertBefore(dragged, this.nextSibling);
                        } else {
                            parent.insertBefore(dragged, this);
                        }
                    }
                });
                item.addEventListener('dragend', () => {
                    dragged = null;
                });
            }

            window.resetMultimediaForm = function() {
                const imagePreview = document.getElementById('imagePreview');
                const videoPreview = document.getElementById('videoPreview');
                const selectAll = document.getElementById('selectAll');
                if (imagePreview) imagePreview.innerHTML = 'Please upload some media.';
                if (videoPreview) videoPreview.innerHTML = 'Please upload some media.';
                if (selectAll) selectAll.checked = false;
                defaultMedia = null;
            };

            window.saveMedia = function() {
                const imageFiles = [];
                const videoFiles = [];

                document.querySelectorAll('#imagePreview .media-item img').forEach(img => imageFiles.push(img.src));
                document.querySelectorAll('#videoPreview .media-item video').forEach(video => videoFiles.push(video.src));

                if (imageFiles.length === 0 && videoFiles.length === 0) {
                    showCustomAlert("No media to save.");
                    return;
                }

                console.log("Saving media...");
                console.log("Images:", imageFiles);
                console.log("Videos:", videoFiles);
                console.log("Default media:", defaultMedia ? defaultMedia.innerHTML : "None");
                showCustomAlert("Media saved successfully (simulation).");
            };

            window.candidatePreview = function() {
                const imageCount = document.querySelectorAll('#imagePreview .media-item img').length;
                const videoCount = document.querySelectorAll('#videoPreview .media-item video').length;

                if (imageCount === 0 && videoCount === 0) {
                    showCustomAlert("Add image/videos to preview");
                } else {
                    showCustomAlert(`Preview:\n${imageCount} image(s), ${videoCount} video(s)`);
                }
            };

            // --- HEADER SCRIPT (from setting options) ---
            const profileMenuContainer = document.getElementById('profileMenuContainer');
            const profileDropdown = document.getElementById('profileDropdown');
            const helpIcon = document.getElementById('helpIcon'); // Get the new help icon by ID

            // Toggle dropdown visibility on click, but not when the help icon is clicked
            if (profileMenuContainer) {
                profileMenuContainer.addEventListener('click', function(event) {
                    // Check if the clicked element is the help icon or contains it
                    if (event.target === helpIcon || helpIcon.contains(event.target)) {
                        event.stopPropagation(); // Prevent click from propagating to the container
                        // Add any specific action for the help icon here if needed
                    } else {
                        event.stopPropagation(); // Prevent click from propagating to document
                        profileDropdown.classList.toggle('show');
                    }
                });
            }

            // Hide dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (profileMenuContainer && !profileMenuContainer.contains(event.target)) {
                    profileDropdown.classList.remove('show');
                }
            });

            // Custom Alert/Confirm Modals (from setting options)
            function showCustomAlert(message) {
                const alertModalHtml = `<div id="custom-alert-overlay" class="custom-modal-overlay">
                    <div class="custom-modal-content">
                        <h3 class="custom-modal-title">Alert</h3>
                        <p class="custom-modal-message">${message}</p>
                        <div class="custom-modal-actions">
                            <button id="custom-alert-ok-btn" class="custom-modal-button ok">OK</button>
                        </div>
                    </div>
                </div>`;
                document.body.insertAdjacentHTML('beforeend', alertModalHtml);
                document.getElementById('custom-alert-ok-btn').addEventListener('click', () => {
                    document.getElementById('custom-alert-overlay').remove();
                });
            }

            function showCustomConfirm(message, onConfirm) {
                const confirmModalHtml = `<div id="custom-confirm-overlay" class="custom-modal-overlay">
                    <div class="custom-modal-content">
                        <h3 class="custom-modal-title">Confirm Action</h3>
                        <p class="custom-modal-message">${message}</p>
                        <div class="custom-modal-actions">
                            <button id="custom-confirm-cancel-btn" class="custom-modal-button cancel">Cancel</button>
                            <button id="custom-confirm-ok-btn" class="custom-modal-button confirm">Confirm</button>
                        </div>
                    </div>
                </div>`;
                document.body.insertAdjacentHTML('beforeend', confirmModalHtml);
                document.getElementById('custom-confirm-ok-btn').addEventListener('click', () => {
                    onConfirm();
                    document.getElementById('custom-confirm-overlay').remove();
                });
                document.getElementById('custom-confirm-cancel-btn').addEventListener('click', () => {
                    document.getElementById('custom-confirm-overlay').remove();
                });
            }
        });
    </script>
</body>
</html>
